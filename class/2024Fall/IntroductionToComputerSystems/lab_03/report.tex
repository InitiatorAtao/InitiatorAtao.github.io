\input{../../homeworks_preamble.tex}
\usepackage{../../homeworks_preamble}
\title{计算机系统概论-Malloc Lab}

\begin{document}
    \maketitle
    \section{实现方式}
    使用平衡树维护不同大小的块,隐式链表维护相同大小的块.数据结构所需空间由 \texttt{mm\_malloc} 和 \texttt{mm\_realloc} 按倍增法动态维护和扩展.由于使用平衡树维护,隐式链表仅用于维护链接关系,不需要在其上进行遍历.

    每次分配空间时查找最大的块返回,如果没有则从尾部新分配空间并合并可能的尾部空块并返回. (亦尝试了查找最接近当前空间的可用块,但并未在特殊构造数据上取得较好的效果,反而造成时间损失)

    释放空间时合并两侧原有的空块,将合并后的块插入平衡树或链表中.

    重分配空间时,如所需空间不增则直接返回原指针并可能分裂出一个空块,否则如当前块后部有足够的空间则合并,返回原指针,否则查看前后空块和当前块合并后是否足够大,足够大则合并前后空块并移动数据,返回前块指针,否则新申请一块内存移动数据后释放当前块.
\end{document}
