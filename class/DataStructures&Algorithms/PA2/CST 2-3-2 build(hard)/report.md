## 算法思路和实现要点
以数组模拟链表维护每个节点的子节点,移动子树时直接在链表上进行插入和删除,同时维护每个节点的规模,高度,以及在兄弟序列中的后缀最大高度.移动子树(等价于插入和删除)时,规模只需要在根节点到目标子树根的路径上增加/减少子树的规模,高度则需要在兄弟序列中向前遍历,更新在当前节点之前的后缀最大高度,一个节点的高度则等于其第一个儿子的后缀最大高度+1.查询时查找到指定节点输出维护好的规模或高度即可.
## 渐进时间复杂度的分析，包含过程
对于所有操作,需要找到其对应的操作节点,每次在链表中遍历的消耗等于所求节点的孩子序号,总成本即通路表示法中所有整数的总和,对于移动操作,需要进行两次基于通路表示法的查找,还有一次对于插入目标节点孩子链表的复杂度为 $k$ 的遍历以查找目标位置,每次维护规模的复杂度为当前节点深度,维护高度的复杂度等于查找复杂度.因此,所有操作的时间复杂度均等于其在题目中定义的成本,总时间复杂度即总成本 $O(C),C\le 10^6$.
## 渐进空间复杂度的分析，包含过程
数组模拟链表维护子节点,链表项的数目等于节点数 $O(n)$,维护的高度和规模都只需要等于节点数 $O(n)$ 的数组,其余为常数空间消耗,总体空间复杂度为 $O(n)$.
## 遇到的困难和解决方法
对于通路表示法的读入,在处理无效后缀时由于在对树进行操作时同步读入出现 IO 问题,改为先读入整个序列后进行操作,增加一个存储序列的 $O(n)$ 空间复杂度,总时间和空间复杂度不变.
## 估计完成本题所用时间 
1.5 小时
## 关于本题的更多感想
